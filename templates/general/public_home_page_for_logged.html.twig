{% extends 'base.html.twig' %}

{% block title %} Bienvenue {% if app.user is not null %} {{app.user.username}} {% endif %}{% endblock %}

{% block body %}
    <div class = "coconuts-article-container">
        <h1 class="coconuts-main-title">Ecrire sur tout... <br> Et surtout sur n'importe quoi !</h1>
        <hr>
        <div>
            <h2 class="is-bold">Articles marque-page</h2>
            <div class="bookmarked-articles-homepage">
                <div class="channel-body-block">
                    {% if bookmarkedArticles is not empty %}
                        {% set mainArticle = bookmarkedArticles|first %}
                        <div class="channel-article-main">
                            <a href="{{ path('article_show', {'id': mainArticle.id})}}">
                                <img class="channel-article-main-pic" src ="{{ vich_uploader_asset(mainArticle) }}" alt="{{ mainArticle.title }}">
                            </a>
                            <div class="channel-article-main-body" >
                                <a href="{{ path('article_show', {'id': mainArticle.id})}}" >
                                    <h5 class="">{{mainArticle.title}}</h5>
                                </a>
                                <p class="">{{mainArticle.description|striptags|slice(0, 200)}}</p>
                            </div>
                        </div>
                        <div class="channel-article-secondary">
                            {% for bookMarkedArticle in bookmarkedArticles|slice(1) %}
                                <div class="channel-article-secondary-item">
                                    <a href="{{ path('article_show', {'id': bookMarkedArticle.id})}}">
                                        <img class="channel-article-secondary-pic" src ="{{ vich_uploader_asset(bookMarkedArticle) }}" alt="{{ bookMarkedArticle.title }}">
                                    </a>
                                    <div class="channel-article-secondary-body" >
                                        <a href="{{ path('article_show', {'id': bookMarkedArticle.id})}}">
                                            <h5 class="">{{bookMarkedArticle.title}}</h5>
                                        </a>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div>Aucun article</div>
                    {% endif %}
                </div>
            </div>
        </div>
        <hr>

        <div>
            <h2 class="is-bold">Auteurs favoris</h2>
            <div class="">
                {% if arrayOfWritersWithArticle is not empty %}
                    {% for writerWithArticle in arrayOfWritersWithArticle %}
                        <div class="followed-writer-block">
                            <img src="{{ vich_uploader_asset(writerWithArticle.writer) }}" class=" coconuts-round-picture rikiki-img" alt ="{{ writerWithArticle.writer.username }}"/>
                            <p>{{ writerWithArticle.writer.username }}</p>
                            <p>
                                {% if writerWithArticle.article|first is not empty %}
                                    {% set article = writerWithArticle.article|first %}
                                    {{ article.title }}
                                {% endif %}
                            </p>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
        <hr>

        <div class="coconuts-trending-articles-part">
            <h2 class="is-bold">       Articles Tendances</h2>
        </div>
    </div>
{% endblock %}
